{"version":3,"file":"taos.js","mappings":"CAAA,WACE,MAQMA,EAAW,CAACC,EAAIC,KACpB,IAAIC,GAAU,EACd,MAAO,KACAA,IACHF,IACAE,GAAU,EACVC,YAAW,IAAMD,GAAU,GAAOD,MAKlCG,EAAQC,IACRA,EAAQC,YAAcD,EAAQE,QAAQC,YACxCH,EAAQC,UAAYD,EAAQE,QAAQC,YAGlCC,EAASJ,GAAWA,EAAQC,UAAYD,EAAQC,UAAUI,WAAW,QAAS,IAE9EC,EAAcN,IACbA,EAAQC,UAAUM,SAAS,eAC9BP,EAAQE,QAAQC,UAAYH,EAAQC,UAAY,aAChDF,EAAMC,IAERA,EAAQC,WAAa,gCACrBG,EAAOJ,GAEA,CACLA,QAAAA,EACAQ,KAAiE,MAA3DC,iBAAiBT,GAAS,6BAChCU,OAAQC,SAASX,EAAQE,QAAQU,YAAc,KAInD,IAAIC,EAAW,GACXC,EAAaC,OAAOD,WACpBE,EAAUD,OAAOC,QAErB,MAAMC,EAAkBvB,GAAS,KAC/BmB,EAASK,SAAQC,GAAMA,EAAGC,QAAUD,EAAGnB,QAAQqB,wBAAwBC,IAAMP,OAAOQ,YAAeJ,EAAGT,OAASM,MAC9G,KAEGQ,EAAU,KACdX,EAAW,GACXY,SAASC,iBAAiB,mBAAmBR,SAAQC,GAAMN,EAASc,KAAKrB,EAAYa,MACrFF,IACAW,sBAAsBC,IAGlBA,EAAe,KACnBb,EAAUD,OAAOC,QACjBH,EAASK,SAAQ,EAAElB,QAAAA,EAASoB,QAAAA,EAASZ,KAAAA,MAC/BY,EAAUJ,EACZjB,EAAMC,IAEEQ,GAAQR,EAAQC,UAAUM,SAAS,UAC3CH,EAAOJ,MAGXiB,KAUFO,IACAM,iBAAiB,SAAUpC,EAASmC,EAAc,KAClDC,iBAAiB,oBAAqBN,GACtCM,iBAAiB,SA/EA,EAACnC,EAAIC,KACpB,IAAImC,EAAY,KAChB,MAAO,KACLC,aAAaD,GACbA,EAAYjC,WAAWH,EAAIC,KA2EJqC,EAVN,KACfnB,IAAeC,OAAOD,aACxBA,EAAaC,OAAOD,WACpBU,OAO8C,MAEjC,IAAIU,kBAAiBC,IACpCA,EAAUjB,SAAQ,EAAEkB,OAAAA,MACdA,EAAOnC,YAAcmC,EAAOnC,UAAUM,SAAS,cAAgB6B,EAAOnC,UAAUM,SAAS,UAC3FM,EAASc,KAAKrB,EAAY8B,UAIvBC,QAAQZ,SAAU,CAACa,YAAY,EAAMC,WAAW,EAAMC,SAAS,IAzF1E","sources":["webpack:///./src/js/taos.js"],"sourcesContent":["(function() {\n  const debounce = (fn, delay) => {\n    let timeoutId = null\n    return () => {\n      clearTimeout(timeoutId)\n      timeoutId = setTimeout(fn, delay)\n    }\n  }\n\n  const throttle = (fn, delay) => {\n    let waiting = false\n    return () => {\n      if (!waiting) {\n        fn()\n        waiting = true\n        setTimeout(() => waiting = false, delay)\n      }\n    }\n  }\n\n  const reset = element => {\n    if (element.className !== element.dataset.taosClass) {\n      element.className = element.dataset.taosClass\n    }\n  }\n  const before = element => element.className = element.className.replaceAll('taos:', '')\n\n  const initElement = element => {\n    if (!element.className.includes('taos-init')) {\n      element.dataset.taosClass = element.className + ' taos-init'\n      reset(element)\n    }\n    element.className += ' !duration-[0ms] !delay-[0ms]'\n    before(element)\n\n    return {\n      element,\n      once: getComputedStyle(element)['animation-iteration-count'] === '1',\n      offset: parseInt(element.dataset.taosOffset || 0)\n    }\n  }\n\n  let elements = []\n  let innerWidth = window.innerWidth\n  let scrollY = window.scrollY\n\n  const refreshTriggers = throttle(() => {\n    elements.forEach(el => el.trigger = el.element.getBoundingClientRect().top - window.innerHeight  + el.offset + scrollY)\n  }, 250)\n\n  const refresh = () => {\n    elements = []\n    document.querySelectorAll('[class*=\"taos\"]').forEach(el => elements.push(initElement(el)))\n    refreshTriggers()\n    requestAnimationFrame(handleScroll)\n  }\n\n  const handleScroll = () => {\n    scrollY = window.scrollY\n    elements.forEach(({element, trigger, once}) => {\n      if (trigger < scrollY) {\n        reset(element)\n      }\n      else if (!once && element.className.includes('taos:')) {\n        before(element)\n      }\n    })\n    refreshTriggers()\n  }\n\n  const handleResize = () => {\n    if (innerWidth !== window.innerWidth) {\n      innerWidth = window.innerWidth\n      refresh()\n    }\n  }\n\n  refresh()\n  addEventListener('scroll', throttle(handleScroll, 32))\n  addEventListener('orientationchange', refresh)\n  addEventListener('resize', debounce(handleResize, 250))\n\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(({target}) => {\n      if (target.className && !target.className.includes('taos-init') && target.className.includes('taos:')) {\n        elements.push(initElement(target))\n      }\n    })\n  })\n  observer.observe(document, {attributes: true, childList: true, subtree: true})\n})()\n"],"names":["throttle","fn","delay","waiting","setTimeout","reset","element","className","dataset","taosClass","before","replaceAll","initElement","includes","once","getComputedStyle","offset","parseInt","taosOffset","elements","innerWidth","window","scrollY","refreshTriggers","forEach","el","trigger","getBoundingClientRect","top","innerHeight","refresh","document","querySelectorAll","push","requestAnimationFrame","handleScroll","addEventListener","timeoutId","clearTimeout","debounce","MutationObserver","mutations","target","observe","attributes","childList","subtree"],"sourceRoot":""}